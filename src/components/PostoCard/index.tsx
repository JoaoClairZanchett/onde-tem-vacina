import React from 'react';
import Chart from "react-google-charts";
import Modal from 'react-modal';
import DetalhesModal from '../DetalhesModal';
import TemVacinaModal from '../TemVacinaModal';
import { Container, Header, Body, DetailsBody, DetailsContainer, Button, NomeVacina, Circulo, Footer, ChartColumn, VacinesInfo, Badge, DataGroup, PostoData } from './styles';

const { useState } = React;

const PostoCard : React.FC = () => { 
   
    const [selectChart, setSelectChart] = useState([
        ["Element", "Vacinados", { role: "style" }],
        ["Janeiro", 8.94, "color: #B4D4EE"], // RGB value
        ["Fevereiro", 10.49, "color: #B4D4EE"], // English color name
        ["Março", 19.3, "color: #B4D4EE"],
        ["Abril", 21.45, "color: #B4D4EE"] // CSS-style declaration
      ]
    );

    const [openedCard, setOpenedCard] = useState(false);
    const [temVacinaModalIsOpen,setTemVacinaIsOpen] = useState(false);
    const [detalhesModalIsOpen,setDetalhesIsOpen] = useState(false);

    function toggleState() {
        setOpenedCard(!openedCard);
    }

    function openTemVacinaModal() {
        setTemVacinaIsOpen(true);
    }

    function closeTemVacinaModal(){
        setTemVacinaIsOpen(false);
    }

    function openDetalhesModal() {
        setDetalhesIsOpen(true);
    }

    function closeDetalhesModal(){
        setDetalhesIsOpen(false);
    }

    function temVacina(){
        closeTemVacinaModal();
        openDetalhesModal();
    }
    
    return (
    <Container >
        <Header onClick={() => {
            toggleState();
        }}>
            <span>
                CMS Heitor Beltrão
            </span>
            <VacinesInfo>
                <span>
                    50 pessoas confirmaram que o posto possui vacina
                </span>
                <Badge>
                <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.90348 4.88875L7.53515 6.44912C7.62596 6.5358 7.62596 6.67842 7.53515 6.76511L7.20413 7.0811C7.11332 7.16778 6.96392 7.16778 6.87311 7.0811L5.24143 5.52072L3.91441 6.78748L5.54902 8.34785C5.63983 8.43454 5.63983 8.57715 5.54902 8.66384L5.218 8.97983C5.12718 9.06651 4.97779 9.06651 4.88697 8.97983L3.25237 7.41666L2.47901 8.1549C1.97222 8.63867 1.72908 9.3042 1.80524 9.98372L2.01323 11.7622L0.0681086 13.619C-0.0227029 13.7057 -0.0227029 13.8483 0.0681086 13.935C0.15892 14.0217 0.308319 14.0217 0.399131 13.935L2.67235 12.397L4.53545 12.5955C5.23557 12.6682 5.93863 12.4445 6.45127 11.9524L11.7799 6.86578L7.80466 3.07111L5.90348 4.88875ZM14.9319 2.27974L12.6118 0.0650155C12.521 -0.0216718 12.3716 -0.0216718 12.2808 0.0650155L11.9498 0.381005C11.8589 0.467692 11.8589 0.610307 11.9498 0.696994L12.7788 1.48837L11.4518 2.75512L9.79372 1.17238L9.29572 0.696994C9.20491 0.610307 9.05551 0.610307 8.9647 0.696994L7.97163 1.64496C7.88082 1.73165 7.88082 1.87426 7.97163 1.96095L8.46963 2.43633L12.4448 6.23659L12.9428 6.71198C13.0336 6.79866 13.183 6.79866 13.2739 6.71198L14.2669 5.76121C14.3577 5.67452 14.3577 5.53191 14.2669 5.44522L12.1138 3.38989L13.4408 2.12314L14.2698 2.91451C14.3607 3.0012 14.5101 3.0012 14.6009 2.91451L14.9319 2.59852C15.0227 2.50904 15.0227 2.36922 14.9319 2.27974Z" fill="white"/>
                </svg>
                </Badge>
            </VacinesInfo>
        </Header>
        {!openedCard ? 
            <Body>
                <span>Rua Anita Garibaldi - Bairro Petropoles</span> <br/>
                <span>Rio de Janeiro - RJ - 56321-258</span>
                {/* <PostoData> 
                    <DataGroup>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="20" height="20" rx="10" fill="#85B7BD" fill-opacity="0.5"/>
                        <path d="M5.33337 9.33331C6.06879 9.33331 6.66671 8.7354 6.66671 7.99998C6.66671 7.26456 6.06879 6.66665 5.33337 6.66665C4.59796 6.66665 4.00004 7.26456 4.00004 7.99998C4.00004 8.7354 4.59796 9.33331 5.33337 9.33331ZM14.6667 9.33331C15.4021 9.33331 16 8.7354 16 7.99998C16 7.26456 15.4021 6.66665 14.6667 6.66665C13.9313 6.66665 13.3334 7.26456 13.3334 7.99998C13.3334 8.7354 13.9313 9.33331 14.6667 9.33331ZM15.3334 9.99998H14C13.6334 9.99998 13.3021 10.1479 13.0605 10.3875C13.9 10.8479 14.4959 11.6791 14.625 12.6666H16C16.3688 12.6666 16.6667 12.3687 16.6667 12V11.3333C16.6667 10.5979 16.0688 9.99998 15.3334 9.99998ZM10 9.99998C11.2896 9.99998 12.3334 8.95623 12.3334 7.66665C12.3334 6.37706 11.2896 5.33331 10 5.33331C8.71046 5.33331 7.66671 6.37706 7.66671 7.66665C7.66671 8.95623 8.71046 9.99998 10 9.99998ZM11.6 10.6666H11.4271C10.9938 10.875 10.5125 11 10 11C9.48754 11 9.00837 10.875 8.57296 10.6666H8.40004C7.07504 10.6666 6.00004 11.7416 6.00004 13.0666V13.6666C6.00004 14.2187 6.44796 14.6666 7.00004 14.6666H13C13.5521 14.6666 14 14.2187 14 13.6666V13.0666C14 11.7416 12.925 10.6666 11.6 10.6666ZM6.93962 10.3875C6.69796 10.1479 6.36671 9.99998 6.00004 9.99998H4.66671C3.93129 9.99998 3.33337 10.5979 3.33337 11.3333V12C3.33337 12.3687 3.63129 12.6666 4.00004 12.6666H5.37296C5.50421 11.6791 6.10004 10.8479 6.93962 10.3875Z" fill="white"/>
                    </svg>

                    <strong>1.869</strong>
                    <span>
                        vacinados
                    </span>
                    </DataGroup>
                    <DataGroup>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="20" height="20" rx="10" fill="#85B7BD" fill-opacity="0.5"/>
                    <path d="M15.0057 12.9063C15.6262 12.3013 15.9986 11.5424 15.9986 10.7143C15.9986 8.92857 14.2722 7.45313 12.0223 7.18973C11.3115 5.90402 9.64154 5 7.69403 5C5.10111 5 3.00015 6.59821 3.00015 8.57143C3.00015 9.39732 3.3725 10.1563 3.99309 10.7634C3.64782 11.4487 3.15135 11.9799 3.14232 11.9888C3.00015 12.1384 2.95953 12.3571 3.04303 12.5469C3.12427 12.7366 3.31383 12.8594 3.52144 12.8594C4.72876 12.8594 5.70365 12.4085 6.3468 11.9933C6.55441 12.0402 6.7688 12.0759 6.98769 12.1027C7.69629 13.3839 9.35946 14.2857 11.3047 14.2857C11.7741 14.2857 12.2254 14.2321 12.6542 14.1339C13.2974 14.5469 14.27 15 15.4796 15C15.6872 15 15.8745 14.8772 15.958 14.6875C16.0392 14.4978 16.0008 14.279 15.8587 14.1295C15.8497 14.1228 15.3509 13.5915 15.0057 12.9063ZM6.14144 10.846L5.75555 11.0938C5.43736 11.2969 5.1124 11.4576 4.78292 11.5714C4.84385 11.4665 4.90478 11.3549 4.96346 11.2411L5.31324 10.5469L4.75359 10C4.44894 9.70089 4.08336 9.21205 4.08336 8.57143C4.08336 7.21652 5.7375 6.07143 7.69403 6.07143C9.65057 6.07143 11.3047 7.21652 11.3047 8.57143C11.3047 9.92634 9.65057 11.0714 7.69403 11.0714C7.32168 11.0714 6.94933 11.029 6.58826 10.9464L6.14144 10.846ZM14.2452 12.1429L13.6878 12.6875L14.0375 13.3817C14.0962 13.4955 14.1571 13.6071 14.2181 13.7121C13.8886 13.5982 13.5636 13.4375 13.2455 13.2344L12.8596 12.9866L12.4105 13.0893C12.0494 13.1719 11.6771 13.2143 11.3047 13.2143C10.0861 13.2143 8.99839 12.7656 8.3417 12.1049C10.6277 11.8638 12.3879 10.3772 12.3879 8.57143C12.3879 8.49554 12.3789 8.42188 12.3721 8.34821C13.8254 8.67188 14.9154 9.61607 14.9154 10.7143C14.9154 11.3549 14.5498 11.8438 14.2452 12.1429Z" fill="white"/>
                    </svg>

                    <strong>6</strong>
                    </DataGroup>
                    <DataGroup>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="20" height="20" rx="10" fill="#85B7BD" fill-opacity="0.5"/>
                        <path d="M9.35626 4.38265L7.89159 7.22683L4.61459 7.68439C4.02693 7.76602 3.79141 8.45988 4.21758 8.85729L6.58842 11.0699L6.02767 14.1955C5.92674 14.7605 6.54804 15.1837 7.06842 14.9194L10 13.4436L12.9316 14.9194C13.452 15.1815 14.0733 14.7605 13.9723 14.1955L13.4116 11.0699L15.7824 8.85729C16.2086 8.45988 15.9731 7.76602 15.3854 7.68439L12.1084 7.22683L10.6437 4.38265C10.3813 3.87568 9.62094 3.86923 9.35626 4.38265Z" fill="white"/>
                    </svg>

                    <strong>3.2</strong>
                    </DataGroup>
                </PostoData>*/}
            </Body> : 
            <DetailsContainer>
                <DetailsBody>
                    <Body>
                    <span>Rua Anita Garibaldi - Bairro Petropoles</span> <br/>
                    <span>Rio de Janeiro - RJ - 56321-258</span>

                    <NomeVacina>
                        <Circulo color='#85B7BD'>
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4.72278 4.09786L6.02812 5.4058C6.10077 5.47846 6.10077 5.59801 6.02812 5.67067L5.7633 5.93554C5.69066 6.0082 5.57114 6.0082 5.49849 5.93554L4.19315 4.6276L3.13153 5.68942L4.43921 6.99736C4.51186 7.07003 4.51186 7.18957 4.43921 7.26223L4.1744 7.5271C4.10175 7.59977 3.98223 7.59977 3.90958 7.5271L2.60189 6.21682L1.9832 6.83563C1.57778 7.24114 1.38326 7.799 1.4442 8.36859L1.61058 9.85936L0.0544869 11.4158C-0.0181623 11.4884 -0.0181623 11.608 0.0544869 11.6806L0.319305 11.9455C0.391954 12.0182 0.511473 12.0182 0.584123 11.9455L2.13788 10.3914L3.62836 10.5579C4.18846 10.6188 4.7509 10.4313 5.16102 10.0188L9.42389 5.75505L6.24373 2.57428L4.72278 4.09786ZM11.9455 1.91093L10.0894 0.0544975C10.0168 -0.0181658 9.89728 -0.0181658 9.82463 0.0544975L9.55981 0.319367C9.48716 0.39203 9.48716 0.511573 9.55981 0.584237L10.223 1.24758L9.16141 2.30941L7.83498 0.982713L7.43658 0.584237C7.36393 0.511573 7.24441 0.511573 7.17176 0.584237L6.37731 1.37885C6.30466 1.45151 6.30466 1.57105 6.37731 1.64372L6.77571 2.04219L9.95586 5.22766L10.3543 5.62614C10.4269 5.6988 10.5464 5.6988 10.6191 5.62614L11.4135 4.82918C11.4862 4.75652 11.4862 4.63698 11.4135 4.56431L9.69105 2.84149L10.7527 1.77967L11.4159 2.44301C11.4885 2.51568 11.608 2.51568 11.6807 2.44301L11.9455 2.17814C12.0182 2.10314 12.0182 1.98594 11.9455 1.91093Z" fill="white"/>
                            </svg>
                        </Circulo>

                        <span>
                            CORONAVAC - Butantan
                        </span>
                    </NomeVacina>
            
                    </Body>
                    <ChartColumn>

                        <span>
                            2.500 pessoas vacinadas nesse local
                        </span>
                        <Chart
                            chartType="ColumnChart"
                            width="630px"
                            height="250px"
                            data={selectChart}
                        />
                    </ChartColumn>

                </DetailsBody>

            
                <Footer>
                    <Button onClick={openTemVacinaModal}>
                        <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.14279 4.09391L5.28783 5.241C5.35155 5.30473 5.35155 5.40957 5.28783 5.4733L5.05553 5.7056C4.9918 5.76933 4.88696 5.76933 4.82323 5.7056L3.6782 4.55851L2.74696 5.48975L3.89405 6.63684C3.95778 6.70057 3.95778 6.80541 3.89405 6.86913L3.66175 7.10143C3.59802 7.16516 3.49318 7.16516 3.42946 7.10143L2.28236 5.95228L1.73965 6.49499C1.38401 6.85063 1.21339 7.3399 1.26684 7.83944L1.41279 9.14687L0.0477955 10.5119C-0.0159318 10.5756 -0.0159318 10.6804 0.0477955 10.7442C0.111523 10.8079 0.216365 10.8079 0.280092 10.7442L1.87533 9.61352L3.18277 9.75948C3.67409 9.81293 4.16746 9.64847 4.52721 9.28666L8.26657 5.54731L5.47695 2.75769L4.14279 4.09391ZM10.4785 2.17593L8.85039 0.547795C8.78666 0.484068 8.68182 0.484068 8.6181 0.547795L8.3858 0.780092C8.32207 0.843819 8.32207 0.948661 8.3858 1.01239L8.96757 1.59416L8.03633 2.5254L6.87279 1.36186L6.52331 1.01239C6.45959 0.948661 6.35475 0.948661 6.29102 1.01239L5.59413 1.70928C5.5304 1.773 5.5304 1.87785 5.59413 1.94157L5.9436 2.29105L8.73321 5.08477L9.08269 5.43424C9.14641 5.49797 9.25126 5.49797 9.31498 5.43424L10.0119 4.7353C10.0756 4.67157 10.0756 4.56673 10.0119 4.503L8.50092 2.99205L9.43216 2.06081L10.0139 2.64257C10.0777 2.7063 10.1825 2.7063 10.2462 2.64257L10.4785 2.41028C10.5422 2.3445 10.5422 2.24171 10.4785 2.17593Z" fill="white"/>
                        </svg>

                        Tem Vacina ?
                    </Button>
                </Footer>
            </DetailsContainer>
        }

        <Modal
            isOpen={temVacinaModalIsOpen}
            style={{
                overlay: {
                    backgroundColor: 'rgba(0, 0, 0, 0.25)'
                },
                content: {
                    top: '30%',
                    left: '50%',
                    right: 'auto',
                    bottom: 'auto',
                    marginRight: '-50%',
                    transform: 'translate(-50%, -50%)',
                    borderRadius: '10px',
                }
            }}
            onRequestClose={closeTemVacinaModal}
            contentLabel="Example Modal"
            ariaHideApp={false}
            >

            <TemVacinaModal temVacina={() => temVacina()} naoTemVacina={() => closeTemVacinaModal()}/>
        </Modal>

        <Modal
            isOpen={detalhesModalIsOpen}
            style={{
                overlay: {
                    backgroundColor: 'rgba(0, 0, 0, 0.25)'
                },
                content: {
                    top: '40%',
                    left: '50%',
                    right: 'auto',
                    bottom: 'auto',
                    marginRight: '-50%',
                    transform: 'translate(-50%, -50%)',
                    borderRadius: '10px',
                }
            }}
            ariaHideApp={false}
            onRequestClose={closeDetalhesModal}
            >

            <DetalhesModal temVacina={() => closeDetalhesModal()} naoTemVacina={() => closeDetalhesModal()} />

        </Modal>
        
    </Container>
    );

}

export default PostoCard;